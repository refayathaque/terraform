2020/12/27 23:38:51 [INFO] Packer version: 1.6.6 [go1.15.6 darwin amd64]
2020/12/27 23:38:51 Checking 'PACKER_CONFIG' for a config file path
2020/12/27 23:38:51 'PACKER_CONFIG' not set; checking the default config file path
2020/12/27 23:38:51 Attempting to open config file: /Users/refayathaque/.packerconfig
2020/12/27 23:38:51 [WARN] Config file doesn't exist: /Users/refayathaque/.packerconfig
2020/12/27 23:38:51 Setting cache directory: /Users/refayathaque/personal/terraform_code/packer/packer_cache
2020/12/27 23:38:51 Creating plugin client for path: /usr/local/bin/packer
2020/12/27 23:38:51 Starting plugin: /usr/local/bin/packer []string{"/usr/local/bin/packer", "plugin", "packer-builder-amazon-ebs"}
2020/12/27 23:38:51 Waiting for RPC address for: /usr/local/bin/packer
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: [INFO] Packer version: 1.6.6 [go1.15.6 darwin amd64]
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Checking 'PACKER_CONFIG' for a config file path
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: 'PACKER_CONFIG' not set; checking the default config file path
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Attempting to open config file: /Users/refayathaque/.packerconfig
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: [WARN] Config file doesn't exist: /Users/refayathaque/.packerconfig
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Setting cache directory: /Users/refayathaque/personal/terraform_code/packer/packer_cache
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: args: []string{"packer-builder-amazon-ebs"}
2020/12/27 23:38:51 Received unix RPC address for /usr/local/bin/packer: addr is /var/folders/cs/hh6b4bkj2s19jwry_mqzw3br0000gn/T/packer-plugin755086520
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Plugin address: unix /var/folders/cs/hh6b4bkj2s19jwry_mqzw3br0000gn/T/packer-plugin755086520
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Waiting for connection...
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Serving a plugin connection...
2020/12/27 23:38:51 Creating plugin client for path: /usr/local/bin/packer
2020/12/27 23:38:51 Starting plugin: /usr/local/bin/packer []string{"/usr/local/bin/packer", "plugin", "packer-provisioner-shell"}
2020/12/27 23:38:51 Waiting for RPC address for: /usr/local/bin/packer
2020/12/27 23:38:51 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.15.6 darwin amd64]
2020/12/27 23:38:51 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2020/12/27 23:38:51 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2020/12/27 23:38:51 packer-provisioner-shell plugin: Attempting to open config file: /Users/refayathaque/.packerconfig
2020/12/27 23:38:51 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /Users/refayathaque/.packerconfig
2020/12/27 23:38:51 packer-provisioner-shell plugin: Setting cache directory: /Users/refayathaque/personal/terraform_code/packer/packer_cache
2020/12/27 23:38:51 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2020/12/27 23:38:51 packer-provisioner-shell plugin: Plugin address: unix /var/folders/cs/hh6b4bkj2s19jwry_mqzw3br0000gn/T/packer-plugin218842788
2020/12/27 23:38:51 Received unix RPC address for /usr/local/bin/packer: addr is /var/folders/cs/hh6b4bkj2s19jwry_mqzw3br0000gn/T/packer-plugin218842788
2020/12/27 23:38:51 packer-provisioner-shell plugin: Waiting for connection...
2020/12/27 23:38:51 packer-provisioner-shell plugin: Serving a plugin connection...
2020/12/27 23:38:51 Preparing build: amazon-ebs
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: [INFO] (aws): No AWS timeout and polling overrides have been set. Packer will default to waiter-specific delays and timeouts. If you would like to customize the length of time between retries and max number of retries you may do so by setting the environment variables AWS_POLL_DELAY_SECONDS and AWS_MAX_ATTEMPTS or the configuration options aws_polling_delay_seconds and aws_polling_max_attempts to your desired values.
2020/12/27 23:38:51 Build debug mode: false
2020/12/27 23:38:51 Force build: false
2020/12/27 23:38:51 On error: 
2020/12/27 23:38:51 Waiting on builds to complete...
2020/12/27 23:38:51 Starting build run: amazon-ebs
2020/12/27 23:38:51 Running builder: amazon-ebs
2020/12/27 23:38:51 [INFO] (telemetry) Starting builder amazon-ebs
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: Found region eu-west-1
2020/12/27 23:38:51 packer-builder-amazon-ebs plugin: [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2020/12/27 23:38:52 1609130332,,ui,say,==> amazon-ebs: Prevalidating any provided VPC information
2020/12/27 23:38:52 1609130332,,ui,say,==> amazon-ebs: Prevalidating AMI Name: packer-example 1609130331
2020/12/27 23:38:53 packer-builder-amazon-ebs plugin: Using AMI Filters {
2020/12/27 23:38:53 packer-builder-amazon-ebs plugin:   ImageIds: ["ami-844e0bf7"]
2020/12/27 23:38:53 packer-builder-amazon-ebs plugin: }
2020/12/27 23:38:54 1609130334,,ui,message,    amazon-ebs: Found Image ID: ami-844e0bf7
2020/12/27 23:38:54 1609130334,,ui,say,==> amazon-ebs: Creating temporary keypair: packer_5fe9615b-1776-3bf9-e512-76f1469a08e0
2020/12/27 23:38:54 1609130334,,ui,say,==> amazon-ebs: Creating temporary security group for this instance: packer_5fe9615e-9a94-e3f2-1fff-af4d1c622845
2020/12/27 23:38:55 packer-builder-amazon-ebs plugin: [DEBUG] Waiting for temporary security group: sg-0b89757520843ed15
2020/12/27 23:39:01 packer-builder-amazon-ebs plugin: [DEBUG] Found security group sg-0b89757520843ed15
2020/12/27 23:39:01 1609130341,,ui,say,==> amazon-ebs: Authorizing access to port 22 from [0.0.0.0/0] in the temporary security groups...
2020/12/27 23:39:01 1609130341,,ui,say,==> amazon-ebs: Launching a source AWS instance...
2020/12/27 23:39:01 1609130341,,ui,say,==> amazon-ebs: Adding tags to source instance
2020/12/27 23:39:01 1609130341,,ui,message,    amazon-ebs: Adding tag: "Name": "Packer Builder"
2020/12/27 23:39:03 1609130343,,ui,message,    amazon-ebs: Instance ID: i-0389ce6a5bd56ad22
2020/12/27 23:39:03 1609130343,,ui,say,==> amazon-ebs: Waiting for instance (i-0389ce6a5bd56ad22) to become ready...
2020/12/27 23:39:29 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 1). Ignoring.
2020/12/27 23:39:29 1609130369,,ui,error,Cancelling build after receiving interrupt
2020/12/27 23:39:29 Cancelling builder after context cancellation context canceled
2020/12/27 23:39:29 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2020/12/27 23:39:29 1609130369,,ui,error,==> amazon-ebs: Error waiting for instance (i-0389ce6a5bd56ad22) to become ready: RequestCanceled: waiter context canceled\n==> amazon-ebs: caused by: context canceled
2020/12/27 23:39:29 1609130369,,ui,say,==> amazon-ebs: No volumes to clean up%!(PACKER_COMMA) skipping
2020/12/27 23:39:29 1609130369,,ui,say,==> amazon-ebs: Deleting temporary security group...
2020/12/27 23:39:30 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 2). Ignoring.
2020/12/27 23:39:30 packer-provisioner-shell plugin: Received interrupt signal (count: 2). Ignoring.
2020/12/27 23:39:30 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0b89757520843ed15 has a dependent object
2020/12/27 23:39:30 packer-builder-amazon-ebs plugin: 	status code: 400, request id: f1fd2549-56ea-4b75-accb-2693b9316d91
2020/12/27 23:39:34 packer-provisioner-shell plugin: Received interrupt signal (count: 3). Ignoring.
2020/12/27 23:39:34 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 3). Ignoring.
2020/12/27 23:39:34 packer-provisioner-shell plugin: Received interrupt signal (count: 4). Ignoring.
2020/12/27 23:39:34 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 4). Ignoring.
2020/12/27 23:39:36 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0b89757520843ed15 has a dependent object
2020/12/27 23:39:36 packer-builder-amazon-ebs plugin: 	status code: 400, request id: b4160d42-7ca1-4757-b577-8e0a91ed7da5
2020/12/27 23:39:41 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0b89757520843ed15 has a dependent object
2020/12/27 23:39:41 packer-builder-amazon-ebs plugin: 	status code: 400, request id: 64a9f612-ffbe-45af-9954-6b2673bdc528
2020/12/27 23:39:47 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0b89757520843ed15 has a dependent object
2020/12/27 23:39:47 packer-builder-amazon-ebs plugin: 	status code: 400, request id: d679696f-0be6-4e5f-bee6-909e3f972b75
2020/12/27 23:39:52 packer-provisioner-shell plugin: Received interrupt signal (count: 5). Ignoring.
2020/12/27 23:39:52 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 5). Ignoring.
2020/12/27 23:39:52 packer-provisioner-shell plugin: Received interrupt signal (count: 6). Ignoring.
2020/12/27 23:39:52 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 6). Ignoring.
2020/12/27 23:39:52 packer-provisioner-shell plugin: Received interrupt signal (count: 7). Ignoring.
2020/12/27 23:39:52 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 7). Ignoring.
2020/12/27 23:39:53 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0b89757520843ed15 has a dependent object
2020/12/27 23:39:53 packer-builder-amazon-ebs plugin: 	status code: 400, request id: d6f68fed-6073-4fbe-a24e-1e71585a6d03
2020/12/27 23:39:56 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 8). Ignoring.
2020/12/27 23:39:56 packer-provisioner-shell plugin: Received interrupt signal (count: 8). Ignoring.
2020/12/27 23:39:58 1609130398,,ui,error,==> amazon-ebs: Error cleaning up security group. Please delete the group manually: err: DependencyViolation: resource sg-0b89757520843ed15 has a dependent object\n==> amazon-ebs: 	status code: 400%!(PACKER_COMMA) request id: d6f68fed-6073-4fbe-a24e-1e71585a6d03; security group ID: sg-0b89757520843ed15
2020/12/27 23:39:58 1609130398,,ui,say,==> amazon-ebs: Deleting temporary keypair...
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: panic: runtime error: invalid memory address or nil pointer dereference
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x2667401]
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: goroutine 94 [running]:
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/builder/amazon/common.(*StepRunSourceInstance).Run(0xc0001634a0, 0x5ed0560, 0xc000532a80, 0x5ed1160, 0xc0003c6bd0, 0x0)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/builder/amazon/common/step_run_source_instance.go:254 +0x16a1
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/packer-plugin-sdk/multistep.(*BasicRunner).Run(0xc0003c6cc0, 0x5ed0560, 0xc000532a80, 0x5ed1160, 0xc0003c6bd0)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/packer-plugin-sdk/multistep/basic_runner.go:70 +0x234
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/builder/amazon/ebs.(*Builder).Run(0xc0009be000, 0x5ed0560, 0xc000532a80, 0x5eeb480, 0xc0003c6480, 0x5e5dc00, 0xc0002e6180, 0x0, 0xc000112c98, 0xc0005a3bd0, ...)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/builder/amazon/ebs/builder.go:354 +0x194b
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/packer-plugin-sdk/rpc.(*BuilderServer).Run(0xc0008b2180, 0x1, 0xc000488070, 0x0, 0x0)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/packer-plugin-sdk/rpc/builder.go:117 +0x1c4
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: reflect.Value.call(0xc000112c60, 0xc0003880c0, 0x13, 0x5880270, 0x4, 0xc0005a3f08, 0x3, 0x3, 0x0, 0x0, ...)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/reflect/value.go:476 +0x8c7
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: reflect.Value.Call(0xc000112c60, 0xc0003880c0, 0x13, 0xc000097708, 0x3, 0x3, 0x0, 0x0, 0x0)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/reflect/value.go:337 +0xb9
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: net/rpc.(*service).call(0xc0008b21c0, 0xc0000bcbe0, 0xc0000765b0, 0xc0000765c0, 0xc0008b0680, 0xc00054eb00, 0x4a065c0, 0xc00048805c, 0x18a, 0x4909dc0, ...)
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/net/rpc/server.go:377 +0x189
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: created by net/rpc.(*Server).ServeCodec
2020/12/27 23:39:58 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/net/rpc/server.go:474 +0x445
2020/12/27 23:39:58 [INFO] (telemetry) ending amazon-ebs
2020/12/27 23:39:58 /usr/local/bin/packer: plugin process exited
2020/12/27 23:39:58 1609130398,,ui,error,Build 'amazon-ebs' errored after 1 minute 6 seconds: unexpected EOF
2020/12/27 23:39:58 1609130398,,ui,say,\n==> Wait completed after 1 minute 6 seconds
2020/12/27 23:39:58 1609130398,,ui,say,Cleanly cancelled builds after being interrupted.
2020/12/27 23:39:58 [INFO] (telemetry) Finalizing.
2020/12/27 23:39:59 waiting for all plugin processes to complete...
2020/12/27 23:39:59 /usr/local/bin/packer: plugin process exited
